@domainName = 7efu6sfwnc.execute-api.ap-northeast-1.amazonaws.com
@customDomainName = nanaphoto.sandbox.uxbrew.jp
@accessToken = {{login.response.body.$.accessToken}}
# @accessToken = eyJraWQiOiI5RHpLaWV1NEhuY0JqS0pxU25NRnIycmZcL0h0SURPQWU5ckF3Z0hTMmh0ST0iLCJhbGciOiJSUzI1NiJ9.eyJvcmlnaW5fanRpIjoiN2Y2OGYyOGYtNjJhZS00NDAwLWJhOGQtZGZkNDUyNzliNWMwIiwic3ViIjoiMDdmNDNhNTgtMzAxMS03MDY0LWNiNTQtYWY4NzQ1OGVhZmUzIiwiYXVkIjoiMzVpZWQ4NG9na2FoNm9sZzM3Z3IzYnMzdmwiLCJldmVudF9pZCI6ImY0MGU4ZTU4LTY2NWEtNGQ2Mi1iODQ3LTcwOTFlZjc1ZDYyZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzU1NjkyODQ3LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuYXAtbm9ydGhlYXN0LTEuYW1hem9uYXdzLmNvbVwvYXAtbm9ydGhlYXN0LTFfUkx0WnBKMDZoIiwiY29nbml0bzp1c2VybmFtZSI6InRlc3R1c2VyMSIsImV4cCI6MTc1NTY5NjQ0NywiaWF0IjoxNzU1NjkyODQ3LCJqdGkiOiJkOTRlMWY3Yi0yZGQ2LTQ0YzAtYWY0Zi1iMTMzOWYwMjEyY2MifQ.Sna24kZWNNRKLLRWJACjWX3nHJDkqckXy1rOUy08TF6-xPM5P58sl9odTP1zLZJypz6zN6djT2N2jkQ1iJssHDN0qWvASPnflnlh5wj2ZxgYgqUHP5Xg7DwCzLPha54oFX2eU7jChdb1cf3eFf-RdTp8yapg1Xm8bBqjI1dhpUAo_WQV4U3OAPGSMDTLIlCjZBZnAP31hwRufuD0NEaSpj3W-KVVCqo6idPNnYhRhhtBOMWIIO9wBL1nDitRuX-joUoMfuGMty5z1t0eOQC0fICoT5eSuqk52d_3rXtpqmOYQbxKt1YBLTGFM7rnD_sW766kKWMXMomMwO6Y8VTx2g

### Nanapocke 認証受け口 : 園長
GET https://{{customDomainName}}/auth/nanapocke?code=Ptest01 HTTP/1.1

### Nanapocke 認証受け口 : 保護者
GET https://{{customDomainName}}/auth/nanapocke?code=Gtest01 HTTP/1.1

### フォトグラファー Signin API
# @name login
POST https://{{customDomainName}}/api/auth/signin HTTP/1.1
content-type: application/json

{
  "userName":"Photo001",
  "password":"test1234",
  "facilityCode":"00001"
}

### リフレッシュトークンでログイン
# @name login
POST https://{{customDomainName}}/api/auth/refresh HTTP/1.1
content-type: application/json

### フォトグラファー追加
POST https://{{customDomainName}}/api/photographer HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "userCode": "Photo001",
  "password": "test1234",
  "userName": "フォトグラファー5"
}

### フォトグラファー一覧取得
GET https://{{customDomainName}}/api/photographer/list HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

### アルバム追加
POST https://{{customDomainName}}/api/album HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "title": "テストアルバム2",
  "description": "アルバムの説明",
  "priceTable": "BASIC"
}

### アルバム一覧取得
GET https://{{customDomainName}}/api/album/list HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

### 写真追加（画像）
# @name photoUploadUrl
POST https://{{customDomainName}}/api/photo HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "fileType": "IMAGE",
  "fileName": "test.jpg",
  "valueType": "BASIC",
  "shootingAt": "2025-11-16T08:30:58Z",
  "tags": ["TAG-A", "TAG-あいうえお"]
}

### 画像ファイルを実際に送信
PUT {{photoUploadUrl.response.body.$.url}} HTTP/1.1

< /home/tomo/work/00_sampledata/test101.jpg

### 写真一覧取得
GET https://{{customDomainName}}/api/photo/list HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

### 設定値
@albumId = 7dd8c161-9a38-4916-94c4-fb59a5814f76
@photoId = 1a722260-b28b-41c8-91ac-1834f4a99cd1

### アルバムへ写真設定する
# @name photoUploadUrl
PUT https://{{customDomainName}}/api/album/{{albumId}}/photo HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "photoId": "{{photoId}}"
}

