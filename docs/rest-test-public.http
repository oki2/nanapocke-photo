@domainName = 7efu6sfwnc.execute-api.ap-northeast-1.amazonaws.com
@customDomainName = nanaphoto.sandbox.uxbrew.jp
@accessToken = {{login.response.body.$.accessToken}}
# @accessToken = eyJraWQiOiI5RHpLaWV1NEhuY0JqS0pxU25NRnIycmZcL0h0SURPQWU5ckF3Z0hTMmh0ST0iLCJhbGciOiJSUzI1NiJ9.eyJvcmlnaW5fanRpIjoiN2Y2OGYyOGYtNjJhZS00NDAwLWJhOGQtZGZkNDUyNzliNWMwIiwic3ViIjoiMDdmNDNhNTgtMzAxMS03MDY0LWNiNTQtYWY4NzQ1OGVhZmUzIiwiYXVkIjoiMzVpZWQ4NG9na2FoNm9sZzM3Z3IzYnMzdmwiLCJldmVudF9pZCI6ImY0MGU4ZTU4LTY2NWEtNGQ2Mi1iODQ3LTcwOTFlZjc1ZDYyZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzU1NjkyODQ3LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuYXAtbm9ydGhlYXN0LTEuYW1hem9uYXdzLmNvbVwvYXAtbm9ydGhlYXN0LTFfUkx0WnBKMDZoIiwiY29nbml0bzp1c2VybmFtZSI6InRlc3R1c2VyMSIsImV4cCI6MTc1NTY5NjQ0NywiaWF0IjoxNzU1NjkyODQ3LCJqdGkiOiJkOTRlMWY3Yi0yZGQ2LTQ0YzAtYWY0Zi1iMTMzOWYwMjEyY2MifQ.Sna24kZWNNRKLLRWJACjWX3nHJDkqckXy1rOUy08TF6-xPM5P58sl9odTP1zLZJypz6zN6djT2N2jkQ1iJssHDN0qWvASPnflnlh5wj2ZxgYgqUHP5Xg7DwCzLPha54oFX2eU7jChdb1cf3eFf-RdTp8yapg1Xm8bBqjI1dhpUAo_WQV4U3OAPGSMDTLIlCjZBZnAP31hwRufuD0NEaSpj3W-KVVCqo6idPNnYhRhhtBOMWIIO9wBL1nDitRuX-joUoMfuGMty5z1t0eOQC0fICoT5eSuqk52d_3rXtpqmOYQbxKt1YBLTGFM7rnD_sW766kKWMXMomMwO6Y8VTx2g
@facilityCode = 00001

### Nanapocke 認証受け口 : 園長
# @no-redirect
GET https://{{customDomainName}}/auth/nanapocke?code=Ptest01 HTTP/1.1

### Nanapocke 認証受け口 : 保護者
# @no-redirect
GET https://{{customDomainName}}/auth/nanapocke?code=Gtest01 HTTP/1.1

### フォトグラファー Signin API
# @name login
POST https://{{customDomainName}}/api/auth/signin HTTP/1.1
content-type: application/json

{
  "userName":"Photo001",
  "password":"test1234",
  "facilityCode":"{{facilityCode}}"
}

### リフレッシュトークンでログイン
# @name login
POST https://{{customDomainName}}/api/auth/refresh HTTP/1.1
content-type: application/json

### フォトグラファー追加
POST https://{{customDomainName}}/api/facility/{{facilityCode}}/photographer HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "userCode": "Photo002",
  "password": "test1234",
  "userName": "フォトグラファー2",
  "description": "説明2",
  "expire": {
    "mode": "DATE",
    "from": "2025-12-16T00:00:00Z",
    "to": "2026-12-16T00:00:00+09:00"
  }
}

### フォトグラファー一覧取得
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photographer/list HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

###
@photographerId = 47b45a08-70e1-70e5-bc3f-cdce75a5936a
### フォトグラファー編集
PATCH https://{{customDomainName}}/api/facility/{{facilityCode}}/photographer/{{photographerId}} HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "changePassword": false,
  "password": "test1234",
  "expire": {
    "mode": "DATE",
    "from": "2026-01-01T00:00:00Z",
    "to": "2026-12-16T00:00:00+09:00"
  }
}

### アルバム追加
# @name albumImageUploadUrl
POST https://{{customDomainName}}/api/facility/{{facilityCode}}/album HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "title": "テストアルバム",
  "description": "アルバムの説明",
  "copyFromAlbumId": "",
  "coverImageFileName": "test.jpg",
  "salesPeriod": {
    "start": "2025-12-16T00:00:00Z",
    "end": "2025-12-30T00:00:00Z"
  },
  "priceTable": "BASIC"
}

### アルバム画像ファイルを実際に送信
# no-exif.jpg
# test101.jpg
PUT {{albumImageUploadUrl.response.body.$.url}} HTTP/1.1

< /home/tomo/work/00_sampledata/test101.jpg

### アルバム一覧取得
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/album/list HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

### 設定値
@albumId = 5d05d00f-3558-4fb4-ada4-917861049ac5

### アルバム編集・更新
# @name albumImageUploadUrl
PATCH https://{{customDomainName}}/api/facility/{{facilityCode}}/album/{{albumId}} HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "title": "テストアルバムd",
  "description": "アルバムdの説明",
  "priceTable": "BASIC",
  "coverImageFileName": "test.jpg",
  "salesPeriod": {
    "start": "2025-12-16T00:00:00Z",
    "end": "2026-12-19T00:00:00Z"
  }
}

### 写真追加（画像ファイル版）
# @name photoUploadUrl
POST https://{{customDomainName}}/api/facility/{{facilityCode}}/photo HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "fileType": "IMAGE",
  "fileName": "test.jpg",
  "priceTier": "STANDARD",
  "albums": ["{{albumId}}"],
  "shootingAt": "2025-11-16T00:00:00+09:00",
  "tags": "TAG-A,TAG-あいうえお#イベント"
}

### 画像ファイルを実際に送信
# no-exif.jpg
# test101.jpg
PUT {{photoUploadUrl.response.body.$.url}} HTTP/1.1

< /home/tomo/work/00_sampledata/test101.jpg

### 写真追加（zipファイル版）
# @name photoZipUploadUrl
POST https://{{customDomainName}}/api/facility/{{facilityCode}}/photo HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "fileType": "ZIP",
  "fileName": "test.zip",
  "priceTier": "STANDARD",
  "albums": ["{{albumId}}"],
  "shootingAt": "2025-11-16T00:00:00+09:00",
  "tags": "TAG-A,TAG-あいうえお#イベント"
}

### 画像ファイルを実際に送信
# photo-zip1.zip
# photo-zip2.zip
PUT {{photoZipUploadUrl.response.body.$.url}} HTTP/1.1

< /home/tomo/work/00_sampledata/photo-zip1.zip

### 写真一覧：全件取得
#GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/list?albumId={{albumId}} HTTP/1.1
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/list?albumId=ALL&limit=100 HTTP/1.1
Authorization: Bearer {{accessToken}}

### 写真一覧：アルバム未設定
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/list?albumId=UNSET&limit=10&photographer=87e45ab8-1011-7058-4926-d62187f4bfe1 HTTP/1.1
Authorization: Bearer {{accessToken}}

### 写真一覧：アルバム指定
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/list?albumId={{albumId}}&limit=10&sortOrder=DESC HTTP/1.1
Authorization: Bearer {{accessToken}}

### 写真一覧：シーケンス番号指定
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/list?albumId=UNSET&limit=2&sortOrder=DESC&sequenceIdQuery=33,34,35 HTTP/1.1
Authorization: Bearer {{accessToken}}

### 設定値
@photoId = 7a1ca146-c497-4f14-8b3c-1eed246db830

# ### アルバムへ写真設定する
# # @name photoUploadUrl
# PUT https://{{customDomainName}}/api/facility/{{facilityCode}}/album/{{albumId}}/photo HTTP/1.1
# content-type: application/json
# Authorization: Bearer {{accessToken}}

# {
#   "photoId": "{{photoId}}"
# }

### 写真編集（アルバムの設定設定）
## @name photoUploadUrl
PUT https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/{{photoId}} HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "album": {
    "mode": "CHANGE",
    "albums": ["{{albumId}}"]
  }
}

### メタ情報一覧取得
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/meta/list HTTP/1.1
Authorization: Bearer {{accessToken}}

### アルバムの販売開始を行う
PUT https://{{customDomainName}}/api/facility/{{facilityCode}}/album/{{albumId}}/sales HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "action": "START",
  "topics": {
    "send": true,
    "classReceivedList": ["0000101"],
    "academicYear": "2025" 
  }
}

### 写真一覧：保護者指定
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/album/56f6fa3f-8d14-4d9f-b5ab-309320353964/photo/list HTTP/1.1
Authorization: Bearer {{accessToken}}

### カートに写真追加：保護者指定
POST https://{{customDomainName}}/api/my/cart HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "albumId": "{{albumId}}",
  "photoId": "{{photoId}}"
}

### カート内写真一覧：保護者指定
GET https://{{customDomainName}}/api/my/cart/list HTTP/1.1
Authorization: Bearer {{accessToken}}

### カート内写真削除：保護者指定
DELETE https://{{customDomainName}}/api/my/cart/item/{{albumId}}/{{photoId}} HTTP/1.1
Authorization: Bearer {{accessToken}}

### カート内写真枚数変更：保護者指定
PUT https://{{customDomainName}}/api/my/cart HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

[
  {
    "albumId": "{{albumId}}",
    "photoId": "7a1ca146-c497-4f14-8b3c-1eed246db830",
    "print": [
      {
        "size": "printl",
        "quantity": 1
      },
      {
        "size": "print2l",
        "quantity": 2
      }
    ],
    "download": [
      {
        "size": "dl",
        "selected": true
      }
    ]
  },
  {
    "albumId": "{{albumId}}",
    "photoId": "1533c165-96e0-4986-b60e-a0ec44aa05a0",
    "print": [
      {
        "size": "printl",
        "quantity": 1
      },
      {
        "size": "print2l",
        "quantity": 2
      }
    ],
    "download": [
      {
        "size": "dl",
        "selected": true
      }
    ]
  }
]

### カート内写真からチェックアウト情報を作成：保護者専用
POST https://{{customDomainName}}/api/my/cart/checkout HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "type": "shipping",
  "address": {
    "name": "山田たろう",
    "postalCode": "1234567",
    "line": "東京都どっか",
    "phone": "01234567890"
  }
}

### 決済履歴一覧を取得：保護者専用
GET https://{{customDomainName}}/api/my/payment/list HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

### 決済履歴詳細を取得：保護者専用
GET https://{{customDomainName}}/api/my/payment/{{OrderID}} HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}










### SMBC callback テスト
POST https://{{customDomainName}}/api/payments/smbc/callback?hoge=fuge HTTP/1.1
content-type: application/x-www-form-urlencoded

result=eyJ0cmFuc2FjdGlvbnJlc3VsdCI6eyJBY2Nlc3NJRCI6bnVsbCwiQWNjZXNzUGFzcyI6bnVsbCwiT3JkZXJJRCI6IlhYWFgtMjYwMTAxLTAwMzMtMDAwMDAwMDAxMCIsIlJlc3VsdCI6IlBBWVNUQVJUIiwiUHJvY2Vzc2RhdGUiOiIyMDI2LzAxLzAxIDAwOjMzOjE3IiwiRXJyQ29kZSI6bnVsbCwiRXJySW5mbyI6bnVsbCwiUGF5bWV0aG9kIjpudWxsfX0%3D.5a120c23c579009f742e4bc71d6371c6b3ea1b5905957fa0d5d2b2f68bd1ae5d

### SMBC Setting
@ShopID = tshop00009520
@ShopPass = 85td5ygq
@OrderID = DNP2-260107-1330-0000000021
@PayType = 45

### SMBC notification テスト
POST https://{{customDomainName}}/api/payments/smbc/notification HTTP/1.1
content-type: application/x-www-form-urlencoded

ShopID={{ShopID}}&ShopPass=**********&AccessID=8d0bc188bb97574cc5d52e634a55cc3d&AccessPass=********************************&OrderID={{OrderID}}&Status=CAPTURE&JobCd=CAPTURE&Amount=502&Tax=0&CancelAmount=0&CancelTax=0&TranDate=20260101142235&ErrCode=&ErrInfo=&PayType={{PayType}}&PayPayTrackingID=&PayPayOrderID=


### SMBC notification テスト 開発環境一次受け
POST https://work.uxbrew.jp/photo2/smbc/notification/ HTTP/1.1
content-type: application/x-www-form-urlencoded

ShopID={{ShopID}}&ShopPass=**********&AccessID=8d0bc188bb97574cc5d52e634a55cc3d&AccessPass=********************************&OrderID={{OrderID}}&Status=CAPTURE&JobCd=CAPTURE&Amount=502&Tax=0&CancelAmount=0&CancelTax=0&TranDate=20260101142235&ErrCode=&ErrInfo=&PayType={{PayType}}&PayPayTrackingID=&PayPayOrderID=


### SMBC SearchTradeMulti
GET https://pt01.smbc-gp.co.jp/payment/SearchTradeMulti.idPass?ShopID={{ShopID}}&ShopPass={{ShopPass}}&OrderID={{OrderID}}&PayType={{PayType}} HTTP/1.1



### test
POST https://stg.nanapocke.com/manage/api/v1/topics HTTP/1.1
content-type: application/json
Authorization: Bearer Dc9b7LWpmu-uwa8cEee6OI_pKceEt7zAvb2YJZW8BHSyMrAiM-Y

{}

### 
POST https://dev-kids.uxbrew.jp/api/payment/smbc/notification/ HTTP/1.1
content-type: application/x-www-form-urlencoded

ShopID={{ShopID}}&ShopPass=**********&AccessID=8d0bc188bb97574cc5d52e634a55cc3d&AccessPass=********************************&OrderID={{OrderID}}&Status=CAPTURE&JobCd=CAPTURE&Amount=502&Tax=0&CancelAmount=0&CancelTax=0&TranDate=20260101142235&ErrCode=&ErrInfo=&PayType={{PayType}}&PayPayTrackingID=&PayPayOrderID=
