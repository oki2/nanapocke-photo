@domainName = 7efu6sfwnc.execute-api.ap-northeast-1.amazonaws.com
@customDomainName = nanaphoto.sandbox.uxbrew.jp
@accessToken = {{login.response.body.$.accessToken}}
# @accessToken = eyJraWQiOiI5RHpLaWV1NEhuY0JqS0pxU25NRnIycmZcL0h0SURPQWU5ckF3Z0hTMmh0ST0iLCJhbGciOiJSUzI1NiJ9.eyJvcmlnaW5fanRpIjoiN2Y2OGYyOGYtNjJhZS00NDAwLWJhOGQtZGZkNDUyNzliNWMwIiwic3ViIjoiMDdmNDNhNTgtMzAxMS03MDY0LWNiNTQtYWY4NzQ1OGVhZmUzIiwiYXVkIjoiMzVpZWQ4NG9na2FoNm9sZzM3Z3IzYnMzdmwiLCJldmVudF9pZCI6ImY0MGU4ZTU4LTY2NWEtNGQ2Mi1iODQ3LTcwOTFlZjc1ZDYyZCIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzU1NjkyODQ3LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuYXAtbm9ydGhlYXN0LTEuYW1hem9uYXdzLmNvbVwvYXAtbm9ydGhlYXN0LTFfUkx0WnBKMDZoIiwiY29nbml0bzp1c2VybmFtZSI6InRlc3R1c2VyMSIsImV4cCI6MTc1NTY5NjQ0NywiaWF0IjoxNzU1NjkyODQ3LCJqdGkiOiJkOTRlMWY3Yi0yZGQ2LTQ0YzAtYWY0Zi1iMTMzOWYwMjEyY2MifQ.Sna24kZWNNRKLLRWJACjWX3nHJDkqckXy1rOUy08TF6-xPM5P58sl9odTP1zLZJypz6zN6djT2N2jkQ1iJssHDN0qWvASPnflnlh5wj2ZxgYgqUHP5Xg7DwCzLPha54oFX2eU7jChdb1cf3eFf-RdTp8yapg1Xm8bBqjI1dhpUAo_WQV4U3OAPGSMDTLIlCjZBZnAP31hwRufuD0NEaSpj3W-KVVCqo6idPNnYhRhhtBOMWIIO9wBL1nDitRuX-joUoMfuGMty5z1t0eOQC0fICoT5eSuqk52d_3rXtpqmOYQbxKt1YBLTGFM7rnD_sW766kKWMXMomMwO6Y8VTx2g
@facilityCode = 00001

### Nanapocke 認証受け口 : 園長
GET https://{{customDomainName}}/auth/nanapocke?code=Ptest01 HTTP/1.1

### Nanapocke 認証受け口 : 保護者
GET https://{{customDomainName}}/auth/nanapocke?code=Gtest01 HTTP/1.1

### フォトグラファー Signin API
# @name login
POST https://{{customDomainName}}/api/auth/signin HTTP/1.1
content-type: application/json

{
  "userName":"Photo001",
  "password":"test1234",
  "facilityCode":"{{facilityCode}}"
}

### リフレッシュトークンでログイン
# @name login
POST https://{{customDomainName}}/api/auth/refresh HTTP/1.1
content-type: application/json

### フォトグラファー追加
POST https://{{customDomainName}}/api/facility/{{facilityCode}}/photographer HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "userCode": "Photo001",
  "password": "test1234",
  "userName": "フォトグラファー1"
}

### フォトグラファー一覧取得
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photographer/list HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

### アルバム追加
POST https://{{customDomainName}}/api/facility/{{facilityCode}}/album HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "title": "テストアルバム",
  "description": "アルバムの説明",
  "priceTable": "BASIC"
}

### アルバム一覧取得
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/album/list HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

### 設定値
@albumId = de20be73-4b0c-49c8-b0ac-7ac29c565c1f

### アルバム編集・更新
PUT https://{{customDomainName}}/api/facility/{{facilityCode}}/album/{{albumId}} HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "title": "テストアルバムa",
  "description": "アルバムaの説明",
  "priceTable": "STANDARD",
  "nbf": "2025-12-16T00:00:00Z",
  "exp": "2025-12-19T00:00:00Z"
}

### 写真追加（画像）
# @name photoUploadUrl
POST https://{{customDomainName}}/api/facility/{{facilityCode}}/photo HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "fileType": "IMAGE",
  "fileName": "test.jpg",
  "priceTier": "STANDARD",
  "shootingAt": "2025-11-16T00:00:00+09:00",
  "albums": ["{{albumId}}"],
  "tags": "TAG-A,TAG-あいうえお#イベント"
}

### 画像ファイルを実際に送信
# no-exif.jpg
# test101.jpg
PUT {{photoUploadUrl.response.body.$.url}} HTTP/1.1

< /home/tomo/work/00_sampledata/test101.jpg

### 写真一覧：全件取得
#GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/list?albumId={{albumId}} HTTP/1.1
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/list?albumId=ALL&limit=2&photographer=87e45ab8-1011-7058-4926-d62187f4bfe1 HTTP/1.1
Authorization: Bearer {{accessToken}}

### 写真一覧：アルバム未設定
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/list?albumId=UNSET&limit=2&photographer=87e45ab8-1011-7058-4926-d62187f4bfe1 HTTP/1.1
Authorization: Bearer {{accessToken}}

### 写真一覧：アルバム指定
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/list?albumId={{albumId}}&limit=2&sortOrder=DESC HTTP/1.1
Authorization: Bearer {{accessToken}}

### 設定値
@photoId = acf1433c-6761-46c8-b4d4-ab0cbcd4bf7b

# ### アルバムへ写真設定する
# # @name photoUploadUrl
# PUT https://{{customDomainName}}/api/facility/{{facilityCode}}/album/{{albumId}}/photo HTTP/1.1
# content-type: application/json
# Authorization: Bearer {{accessToken}}

# {
#   "photoId": "{{photoId}}"
# }

### 写真編集（アルバムの設定設定）
## @name photoUploadUrl
PUT https://{{customDomainName}}/api/facility/{{facilityCode}}/photo/{{photoId}} HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "album": {
    "mode": "CHANGE",
    "albums": ["{{albumId}}"]
  }
}

### メタ情報一覧取得
GET https://{{customDomainName}}/api/facility/{{facilityCode}}/meta/list HTTP/1.1
Authorization: Bearer {{accessToken}}

### アルバムの販売開始を行う
PUT https://{{customDomainName}}/api/facility/{{facilityCode}}/album/{{albumId}}/sales HTTP/1.1
content-type: application/json
Authorization: Bearer {{accessToken}}

{
  "action": "START",
  "topics": {
    "send": true,
    "classReceivedList": ["0000101"],
    "academicYear": "2025" 
  }
}





















### test
POST https://stg.nanapocke.com/manage/api/v1/topics HTTP/1.1
content-type: application/json
Authorization: Bearer Dc9b7LWpmu-uwa8cEee6OI_pKceEt7zAvb2YJZW8BHSyMrAiM-Y

{}
